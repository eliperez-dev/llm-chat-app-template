<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Better Transfer</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
		
		<!-- Swiper.js CSS -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
		
		<!-- Markdown Library -->
		<script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
		
		<style>
			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
			}

			body {
				font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
				background: radial-gradient(circle at center, 
					rgba(240, 230, 190, 0.6) 0%, 
					rgba(200, 210, 180, 0.4) 20%,
					rgba(232, 227, 216, 0.8) 45%,
					#e8e3d8 70%, 
					#e5e0d3 100%);
				min-height: 100vh;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 2rem;
				overflow: hidden;
				cursor: none; /* Hide default cursor */
			}

			/* Custom Cursor */
			.cursor-dot {
				width: 8px;
				height: 8px;
				background: #7a9b6c;
				border-radius: 50%;
				position: fixed;
				pointer-events: none;
				z-index: 9999;
				transition: transform 0.15s ease, opacity 0.3s ease;
				transform: translate(-50%, -50%);
				opacity: 1;
			}

			.cursor-outline {
				width: 40px;
				height: 40px;
				border: 2px solid rgba(122, 155, 108, 0.4);
				border-radius: 50%;
				position: fixed;
				pointer-events: none;
				z-index: 9998;
				transition: all 0.15s ease-out;
				transform: translate(-50%, -50%);
			}

			.cursor-outline.hover {
				width: 60px;
				height: 60px;
				border-color: rgba(122, 155, 108, 0.6);
				background: rgba(122, 155, 108, 0.08);
			}

			.cursor-dot.click {
				transform: translate(-50%, -50%) scale(0.5);
			}

			/* Click Ripple Effect */
			.ripple {
				position: fixed;
				border-radius: 50%;
				background: rgba(122, 155, 108, 0.3);
				pointer-events: none;
				z-index: 9997;
				animation: ripple-animation 0.6s ease-out;
			}

			@keyframes ripple-animation {
				from {
					width: 0px;
					height: 0px;
					opacity: 1;
					transform: translate(-50%, -50%);
				}
				to {
					width: 100px;
					height: 100px;
					opacity: 0;
					transform: translate(-50%, -50%);
				}
			}

			.container {
				width: 100%;
				max-width: 600px;
				position: relative;
				margin: 0 auto;
			}

			/* Landing Page Styles */
		.landing-page {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100vh;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			z-index: 10000;
			transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
		}

			.landing-page.hidden {
				transform: translateX(-100%);
				opacity: 0;
			}

	.app-container {
		position: relative;
		width: 100%;
		transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
		transform: translateX(100%);
		opacity: 0;
		display: flex;
		justify-content: center;
		align-items: flex-start;
		min-height: 100vh;
		padding-top: 3rem;
	}

			.app-container.visible {
				transform: translateX(0);
				opacity: 1;
			}

			.landing-content {
				text-align: center;
				max-width: 700px;
				padding: 2rem;
				animation: fadeInUp 0.8s ease-out;
			}

			.landing-title {
				font-size: 4rem;
				font-weight: 700;
				color: #3d3d2f;
				margin-bottom: 1rem;
				letter-spacing: -0.03em;
				line-height: 1.1;
			}

			.landing-tagline {
				font-size: 1.15rem;
				color: #6b6857;
				margin-bottom: 3rem;
				font-weight: 400;
				max-width: 500px;
				margin-left: auto;
				margin-right: auto;
			}

			/* Start Button */
			.start-button {
				background: linear-gradient(135deg, #7a9b6c, #8fad7d);
				color: white;
				border: none;
				border-radius: 16px;
				padding: 1.25rem 3rem;
				font-size: 1.1rem;
				font-weight: 600;
				cursor: none;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
				font-family: 'Inter', sans-serif;
				box-shadow: 0 8px 24px rgba(122, 155, 108, 0.35);
				margin-top: 2rem;
			}

			.start-button:hover {
				transform: translateY(-3px) scale(1.05);
				box-shadow: 0 12px 32px rgba(122, 155, 108, 0.45);
			}

			/* Chat Sidebar Styles */
			.chat-toggle-button {
				position: fixed;
				bottom: 2rem;
				right: 2rem;
				width: 60px;
				height: 60px;
				background: linear-gradient(135deg, #7a9b6c, #8fad7d);
				border: none;
				border-radius: 50%;
				display: none;
				align-items: center;
				justify-content: center;
				cursor: none;
				box-shadow: 0 8px 24px rgba(122, 155, 108, 0.4);
				z-index: 9000;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}

			.chat-toggle-button.visible {
				display: flex;
			}

			.chat-toggle-button:hover {
				transform: scale(1.1);
				box-shadow: 0 12px 32px rgba(122, 155, 108, 0.5);
			}

			.chat-toggle-button svg {
				width: 28px;
				height: 28px;
				fill: white;
			}

			/* Chat Sidebar */
			.chat-sidebar {
				position: fixed;
				top: 2rem;
				right: 2rem;
				bottom: 2rem;
				width: 400px;
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(20px);
				border-radius: 24px;
				box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
				transform: translateX(calc(100% + 2rem));
				transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
				z-index: 8999;
				display: flex;
				flex-direction: column;
				overflow: hidden;
			}

			.chat-sidebar.open {
				transform: translateX(0);
			}

	.app-container {
		position: relative;
		width: 100%;
		transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1), margin-right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		transform: translateX(100%);
		opacity: 0;
		display: flex;
		justify-content: center;
		align-items: flex-start;
		min-height: 100vh;
		padding-top: 3rem;
	}

			.app-container.chat-open {
				margin-right: 420px;
			}

			/* Chat Header */
			.chat-header {
				padding: 1.5rem;
				border-bottom: 1px solid rgba(122, 155, 108, 0.2);
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			.chat-header h3 {
				font-size: 1.1rem;
				font-weight: 600;
				color: #3d3d2f;
			}

			.chat-close {
				background: none;
				border: none;
				font-size: 1.5rem;
				color: #8a8572;
				cursor: none;
				padding: 0;
				width: 32px;
				height: 32px;
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 8px;
				transition: all 0.2s ease;
			}

			.chat-close:hover {
				background: rgba(122, 155, 108, 0.1);
				color: #3d3d2f;
			}

			/* Chat Messages Area */
			.chat-messages {
				flex: 1;
				overflow-y: auto;
				padding: 1.5rem;
				display: flex;
				flex-direction: column;
				gap: 1rem;
			}

			.chat-message {
				max-width: 85%;
				padding: 0.875rem 1rem;
				border-radius: 12px;
				font-size: 0.9rem;
				line-height: 1.5;
				animation: messageSlideIn 0.3s ease-out;
			}

			@keyframes messageSlideIn {
				from {
					opacity: 0;
					transform: translateY(10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.chat-message.assistant {
				background: rgba(122, 155, 108, 0.15);
				color: #3d3d2f;
				align-self: flex-start;
				border: 1px solid rgba(122, 155, 108, 0.2);
			}

			.chat-message.user {
				background: linear-gradient(135deg, #7a9b6c, #8fad7d);
				color: white;
				align-self: flex-end;
			}

			/* Markdown Styles */
			.chat-message h1, .chat-message h2, .chat-message h3, .chat-message h4 {
				margin: 0.75rem 0 0.5rem 0;
				font-weight: 600;
				line-height: 1.3;
			}

			.chat-message h1 { font-size: 1.2rem; }
			.chat-message h2 { font-size: 1.1rem; }
			.chat-message h3 { font-size: 1rem; }

			.chat-message ul, .chat-message ol {
				margin: 0.5rem 0;
				padding-left: 1.5rem;
			}

			.chat-message li {
				margin: 0.25rem 0;
			}

			.chat-message code {
				background: rgba(0, 0, 0, 0.1);
				padding: 0.2rem 0.4rem;
				border-radius: 3px;
				font-family: 'Courier New', monospace;
				font-size: 0.9em;
			}

			.chat-message pre {
				background: rgba(0, 0, 0, 0.08);
				padding: 1rem;
				border-radius: 8px;
				overflow-x: auto;
				margin: 0.5rem 0;
				font-family: 'Courier New', monospace;
				font-size: 0.85rem;
				line-height: 1.4;
			}

			.chat-message pre code {
				background: none;
				padding: 0;
				border-radius: 0;
				font-size: 1em;
			}

			.chat-message a {
				color: #7a9b6c;
				text-decoration: underline;
				cursor: pointer;
			}

			.chat-message blockquote {
				border-left: 3px solid rgba(122, 155, 108, 0.3);
				margin: 0.5rem 0;
				padding-left: 1rem;
				color: rgba(61, 61, 47, 0.8);
				font-style: italic;
			}

			.chat-message strong {
				font-weight: 600;
			}

			.chat-message em {
				font-style: italic;
			}

			/* Quick Action Buttons */
			.quick-actions {
				padding: 1rem 1.5rem;
				display: flex;
				flex-direction: column;
				gap: 0.5rem;
				border-top: 1px solid rgba(122, 155, 108, 0.2);
			}

			.quick-action-label {
				font-size: 0.75rem;
				color: #8a8572;
				font-weight: 500;
				margin-bottom: 0.25rem;
			}

			.quick-action-btn {
				background: rgba(122, 155, 108, 0.1);
				border: 1px solid rgba(122, 155, 108, 0.2);
				border-radius: 8px;
				padding: 0.625rem 0.875rem;
				font-size: 0.85rem;
				color: #3d3d2f;
				cursor: none;
				transition: all 0.2s ease;
				font-family: 'Inter', sans-serif;
				text-align: left;
			}

			.quick-action-btn:hover {
				background: rgba(122, 155, 108, 0.2);
				border-color: #7a9b6c;
				transform: translateX(2px);
			}

			/* Chat Input */
			.chat-input-container {
				padding: 1.5rem;
				border-top: 1px solid rgba(122, 155, 108, 0.2);
				display: flex;
				gap: 0.75rem;
			}

			.chat-input {
				flex: 1;
				padding: 0.875rem 1rem;
				border: 2px solid rgba(122, 155, 108, 0.2);
				border-radius: 12px;
				font-size: 0.9rem;
				font-family: 'Inter', sans-serif;
				background: rgba(255, 255, 255, 0.5);
				transition: all 0.2s ease;
				resize: none;
				max-height: 100px;
			}

			.chat-input:focus {
				outline: none;
				border-color: #7a9b6c;
				background: white;
			}

			.chat-send-btn {
				background: linear-gradient(135deg, #7a9b6c, #8fad7d);
				border: none;
				border-radius: 12px;
				padding: 0.875rem 1.25rem;
				color: white;
				font-weight: 600;
				cursor: none;
				transition: all 0.2s ease;
				font-size: 0.9rem;
			}

			.chat-send-btn:hover {
				transform: scale(1.05);
				box-shadow: 0 4px 12px rgba(122, 155, 108, 0.3);
			}

			.chat-send-btn:disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}

	.header {
		text-align: center;
		margin-bottom: 1rem;
		animation: fadeIn 0.6s ease-out;
	}

			.header h1 {
				font-size: 2.2rem;
				font-weight: 700;
				color: #3d3d2f;
				margin-bottom: 0.5rem;
			}

			.header p {
				font-size: 0.95rem;
				color: #6b6857;
				font-weight: 400;
			}

	/* Segmented Progress Bar */
	.progress-container {
		background: rgba(255, 255, 255, 0.6);
		border-radius: 20px;
		padding: 1.25rem 2rem;
		margin-bottom: 1.25rem;
		box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
	}

			.progress-bars {
				display: flex;
				gap: 0.5rem;
				margin-bottom: 1rem;
			}

			.progress-segment {
				flex: 1;
				height: 8px;
				background: #d4cfc4;
				border-radius: 10px;
				transition: all 0.4s ease;
				position: relative;
				overflow: hidden;
			}

			.progress-segment.completed {
				background: linear-gradient(90deg, #7a9b6c, #8fad7d);
			}

			.progress-segment.active {
				background: linear-gradient(90deg, #a8b89f, #7a9b6c);
				animation: pulse 2s ease-in-out infinite;
			}

			@keyframes pulse {
				0%, 100% { opacity: 1; }
				50% { opacity: 0.7; }
			}

			.progress-labels {
				display: flex;
				justify-content: space-between;
				margin-top: 0.75rem;
			}

			.progress-label {
				font-size: 0.75rem;
				color: #8a8572;
				font-weight: 500;
				text-align: center;
				flex: 1;
				transition: all 0.3s ease;
			}

			.progress-label.active,
			.progress-label.completed {
				color: #4a4a37;
				font-weight: 600;
			}

		/* Swiper Container for Stacked Cards */
		.swiper-container {
			width: 100%;
			height: 520px;
			position: relative;
		}

			.swiper-slide {
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 30px;
				font-size: 22px;
				font-weight: bold;
				color: #fff;
			}

	/* Individual Card Styles with gradient backgrounds */
	.card {
		width: 100%;
		background: linear-gradient(135deg, #e8e9ca 0%, #d5d9b8 100%);
		border-radius: 30px;
		padding: 2.5rem 2.5rem;
		box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
		height: 520px;
		position: relative;
		display: flex;
		flex-direction: column;
	}

			.card-1 { background: linear-gradient(135deg, #e8e9ca 0%, #d5d9b8 100%); }
			.card-2 { background: linear-gradient(135deg, #c9d6d9 0%, #b3c5c9 100%); }
			.card-3 { background: linear-gradient(135deg, #dfd8c9 0%, #cfc4ae 100%); }
			.card-4 { background: linear-gradient(135deg, #d9ccc9 0%, #c9b8b3 100%); }

			.section-title {
				font-size: 1.65rem;
				font-weight: 600;
				color: #3d3d2f;
				margin-bottom: 0.5rem;
				text-align: center;
			}

		.section-subtitle {
			font-size: 0.9rem;
			color: #6b6857;
			margin-bottom: 1.5rem;
			text-align: center;
			font-weight: 400;
		}

		/* Button Grid */
		.button-grid {
			display: grid;
			gap: 0.6rem;
			flex: 1;
			align-content: flex-start;
		}

		.option-button {
			background: rgba(255, 255, 255, 0.7);
			border: 2px solid rgba(122, 155, 108, 0.2);
			border-radius: 14px;
			padding: 0.95rem 1.25rem;
			font-size: 0.95rem;
			font-weight: 500;
			color: #3d3d2f;
			cursor: none;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			font-family: 'Inter', sans-serif;
			text-align: left;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
		}

			.option-button:hover {
				background: rgba(255, 255, 255, 0.95);
				transform: translateY(-3px) scale(1.02);
				box-shadow: 0 8px 20px rgba(122, 155, 108, 0.15);
				border-color: #7a9b6c;
			}

			.option-button:active {
				transform: translateY(0);
			}

			.option-button.selected {
				background: rgba(122, 155, 108, 0.15);
				border-color: #7a9b6c;
				color: #3d3d2f;
				font-weight: 600;
			}

			/* Back Button */
			.back-button {
				position: absolute;
				top: 2.5rem;
				left: 2.5rem;
				width: 40px;
				height: 40px;
				background: rgba(255, 255, 255, 0.8);
				border: 2px solid rgba(122, 155, 108, 0.2);
				border-radius: 12px;
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: none;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
				z-index: 10;
			}

			.back-button:hover {
				background: white;
				border-color: #7a9b6c;
				transform: translateX(-3px) scale(1.05);
				box-shadow: 0 4px 12px rgba(122, 155, 108, 0.2);
			}

			.back-button svg {
				width: 20px;
				height: 20px;
				stroke: #3d3d2f;
				stroke-width: 2.5;
			}

			/* Search Icon */
			.search-container {
				position: absolute;
				top: 2.5rem;
				right: 2.5rem;
				z-index: 10;
			}

			.search-icon {
				width: 40px;
				height: 40px;
				background: rgba(255, 255, 255, 0.8);
				border: 2px solid rgba(122, 155, 108, 0.2);
				border-radius: 12px;
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: none;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
			}

			.search-icon:hover {
				background: white;
				border-color: #7a9b6c;
				transform: scale(1.08);
				box-shadow: 0 6px 20px rgba(122, 155, 108, 0.2);
			}

			.search-icon svg {
				width: 18px;
				height: 18px;
				stroke: #3d3d2f;
				stroke-width: 2;
			}

			/* Search Overlay */
			.search-overlay {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(61, 61, 47, 0.4);
				backdrop-filter: blur(12px);
				z-index: 1000;
				align-items: center;
				justify-content: center;
				animation: fadeIn 0.3s ease;
			}

			.search-overlay.active {
				display: flex;
			}

			.search-modal {
				background: linear-gradient(135deg, #f5f5e8 0%, #ebe8d8 100%);
				border-radius: 24px;
				padding: 2rem;
				width: 90%;
				max-width: 480px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
				animation: slideUp 0.3s ease;
			}

			@keyframes slideUp {
				from {
					opacity: 0;
					transform: translateY(30px) scale(0.95);
				}
				to {
					opacity: 1;
					transform: translateY(0) scale(1);
				}
			}

			.search-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 1.5rem;
			}

			.search-header h3 {
				font-size: 1.2rem;
				font-weight: 600;
				color: #3d3d2f;
			}

			.close-search {
				background: rgba(255, 255, 255, 0.6);
				border: 2px solid rgba(122, 155, 108, 0.2);
				font-size: 1.4rem;
				color: #3d3d2f;
				cursor: none;
				padding: 0;
				width: 34px;
				height: 34px;
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 10px;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}

			.close-search:hover {
				background: white;
				border-color: #7a9b6c;
				transform: scale(1.1) rotate(90deg);
			}

			.search-input-container {
				margin-bottom: 1.5rem;
			}

			.search-input {
				width: 100%;
				padding: 0.875rem 1rem;
				border: 2px solid rgba(122, 155, 108, 0.2);
				border-radius: 12px;
				font-size: 0.95rem;
				font-family: 'Inter', sans-serif;
				transition: all 0.2s ease;
				background: rgba(255, 255, 255, 0.7);
			}

			.search-input:focus {
				outline: none;
				border-color: #7a9b6c;
				box-shadow: 0 0 0 3px rgba(122, 155, 108, 0.1);
				background: white;
			}

			.search-results {
				max-height: 400px;
				overflow-y: auto;
			}

			/* Checkbox Option Button */
		.checkbox-option {
			display: flex;
			align-items: center;
			background: rgba(255, 255, 255, 0.7);
			border: 2px solid rgba(122, 155, 108, 0.2);
			border-radius: 14px;
			padding: 0.85rem 1.25rem;
			font-size: 0.95rem;
			font-weight: 500;
			color: #3d3d2f;
			cursor: none;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			font-family: 'Inter', sans-serif;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
			margin-bottom: 0.6rem;
		}

			.checkbox-option:hover {
				background: rgba(255, 255, 255, 0.95);
				transform: translateY(-2px) scale(1.01);
				box-shadow: 0 6px 18px rgba(122, 155, 108, 0.12);
				border-color: #7a9b6c;
			}

			.checkbox-option input[type="checkbox"] {
				width: 20px;
				height: 20px;
				margin-right: 1rem;
				cursor: none;
				accent-color: #7a9b6c;
			}

			.checkbox-option.checked {
				background: rgba(122, 155, 108, 0.15);
				border-color: #7a9b6c;
				font-weight: 600;
			}

	.continue-button {
		background: linear-gradient(135deg, #7a9b6c, #8fad7d);
		color: white;
		border: none;
		border-radius: 14px;
		padding: 1rem;
		font-size: 1rem;
		font-weight: 600;
		cursor: none;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		font-family: 'Inter', sans-serif;
		width: 100%;
		margin-top: 1rem;
		flex-shrink: 0;
		box-shadow: 0 6px 20px rgba(122, 155, 108, 0.3);
	}

		.continue-button:hover:not(:disabled) {
			transform: translateY(-3px) scale(1.02);
			box-shadow: 0 10px 30px rgba(122, 155, 108, 0.45);
		}

		.continue-button:disabled {
			background: linear-gradient(135deg, #c4c4b8, #d0d0c6);
			color: #8a8a7a;
			cursor: not-allowed !important;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
			opacity: 0.6;
			pointer-events: none;
		}

			/* Animations */
			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(-20px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			@keyframes slideDown {
				from {
					opacity: 0;
					transform: translateY(-30px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			/* Summary Display */
			.summary-display {
				text-align: center;
				margin: 1.5rem 0;
				background: rgba(255, 255, 255, 0.5);
				padding: 1.5rem;
				border-radius: 16px;
			}

			.summary-item {
				font-size: 0.95rem;
				color: #3d3d2f;
				line-height: 2;
				margin-bottom: 0.5rem;
			}

			.summary-item strong {
				color: #3d3d2f;
				font-weight: 600;
			}

			.summary-item span {
				color: #6b6857;
			}

			/* Responsive */
			@media (max-width: 768px) {
				body {
					padding: 1rem;
					cursor: auto !important; /* Show default cursor on mobile */
				}

				/* Hide custom cursor on mobile */
				.cursor-dot, .cursor-outline {
					display: none !important;
				}

				/* Restore default cursor on mobile */
				.option-button, .checkbox-option, .back-button, 
				.search-icon, .continue-button, .close-search,
				input[type="checkbox"], .start-button {
					cursor: pointer !important;
				}

				.landing-title {
					font-size: 2.5rem;
				}

				.landing-tagline {
					font-size: 1rem;
				}

				.start-button {
					padding: 1rem 2rem;
					font-size: 1rem;
				}

				.header h1 {
					font-size: 1.8rem;
				}
				
		.card {
			padding: 2rem 1.5rem 1.75rem;
			height: 500px;
		}

				.search-container, .back-button {
					top: 2rem;
				}

				.search-container {
					right: 1.5rem;
				}

				.back-button {
					left: 1.5rem;
				}
				
				.section-title {
					font-size: 1.4rem;
				}

				.progress-container {
					padding: 1.25rem 1.5rem;
				}

				.progress-label {
					font-size: 0.65rem;
				}

			.swiper-container {
				height: 500px;
			}

			/* Mobile Chat Styles */
			.chat-toggle-button {
				bottom: 1.5rem;
				right: 1.5rem;
				width: 56px;
				height: 56px;
				cursor: pointer !important;
			}

			.chat-sidebar {
				top: 0;
				right: 0;
				left: 0;
				bottom: 0;
				width: 100%;
				border-radius: 0;
				margin: 0;
			}

			.app-container.chat-open {
				margin-right: 0;
			}

			.chat-header {
				padding: 1.25rem;
			}

			.chat-messages {
				padding: 1.25rem;
			}

			.chat-input-container {
				padding: 1.25rem;
			}

			.quick-actions {
				padding: 0.875rem 1.25rem;
			}

			.chat-close, .chat-send-btn, .quick-action-btn {
				cursor: pointer !important;
			}
		}

			/* Also hide cursor on touch devices */
			@media (hover: none) and (pointer: coarse) {
				body {
					cursor: auto !important;
				}

				.cursor-dot, .cursor-outline {
					display: none !important;
				}

				.option-button, .checkbox-option, .back-button, 
				.search-icon, .continue-button, .close-search,
				input[type="checkbox"] {
					cursor: pointer !important;
				}
			}
		</style>
	</head>
	<body>
	<!-- Custom Cursor Elements -->
	<div class="cursor-dot"></div>
	<div class="cursor-outline"></div>

	<!-- Chat Toggle Button -->
	<button class="chat-toggle-button" id="chat-toggle">
		<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
			<path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
		</svg>
	</button>

	<!-- Chat Sidebar -->
	<div class="chat-sidebar" id="chat-sidebar">
		<!-- Chat Header -->
		<div class="chat-header">
			<h3>Transfer Assistant</h3>
			<button class="chat-close" id="chat-close">Ã—</button>
		</div>

		<!-- Chat Messages -->
		<div class="chat-messages" id="chat-messages">
			<!-- Messages will be added dynamically -->
		</div>

		<!-- Quick Actions -->
		<div class="quick-actions">
			<div class="quick-action-label">Quick Actions</div>
			<button class="quick-action-btn">What courses do I need?</button>
			<button class="quick-action-btn">GPA requirements?</button>
			<button class="quick-action-btn">Transfer deadlines?</button>
			<button class="quick-action-btn">School comparison?</button>
		</div>

		<!-- Chat Input -->
		<div class="chat-input-container">
			<textarea class="chat-input" id="chat-input" placeholder="Ask anything..." rows="1"></textarea>
			<button class="chat-send-btn" id="chat-send-btn">Send</button>
		</div>
	</div>

	<!-- Landing Page -->
		<div class="landing-page" id="landing-page">
			<div class="landing-content">
				<h1 class="landing-title">BetterTransfer</h1>
				<p class="landing-tagline">Map your course requirements and track your progress from community college to university</p>

				<!-- Start Button -->
				<button class="start-button" onclick="startPlanning()">Get Started â†’</button>
			</div>
		</div>

		<!-- App Container (Card Stack) -->
		<div class="app-container" id="app-container">
			<div class="container">
			<div class="header">
				<h1>Better Transfer</h1>
				<p>Your path to UC/CSU transfer success</p>
			</div>

			<!-- Segmented Progress Bar -->
			<div class="progress-container">
				<div class="progress-bars">
					<div class="progress-segment active" id="segment-1"></div>
					<div class="progress-segment" id="segment-2"></div>
					<div class="progress-segment" id="segment-3"></div>
					<div class="progress-segment" id="segment-4"></div>
				</div>
				<div class="progress-labels">
					<div class="progress-label active" id="label-1">Community<br>College</div>
					<div class="progress-label" id="label-2">Target<br>Schools</div>
					<div class="progress-label" id="label-3">Major</div>
					<div class="progress-label" id="label-4">Ready</div>
				</div>
			</div>

			<!-- Swiper Card Stack -->
			<div class="swiper-container" id="card-swiper">
				<div class="swiper-wrapper">
					
					<!-- Card 1: Community College -->
					<div class="swiper-slide">
						<div class="card card-1">
							<!-- Search Icon -->
							<div class="search-container">
								<div class="search-icon" onclick="openSearch('cc')">
									<svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
									</svg>
								</div>
							</div>

							<h2 class="section-title">Select Your Community College</h2>
							<p class="section-subtitle">Where are you currently enrolled?</p>
							<div class="button-grid" id="cc-list">
								<button class="option-button" onclick="selectCC('Southwestern College', this)">Southwestern College</button>
								<button class="option-button" onclick="selectCC('Cuyamaca College', this)">Cuyamaca College</button>
								<button class="option-button" onclick="selectCC('MiraCosta College', this)">MiraCosta College</button>
								<button class="option-button" onclick="selectCC('San Diego Miramar College', this)">San Diego Miramar College</button>
								<button class="option-button" onclick="selectCC('San Diego Mesa College', this)">San Diego Mesa College</button>
							</div>
						</div>
					</div>

					<!-- Card 2: Target Schools -->
					<div class="swiper-slide">
						<div class="card card-2">
							<!-- Back Button -->
							<div class="back-button" onclick="goBack()">
								<svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path>
								</svg>
							</div>

							<!-- Search Icon -->
							<div class="search-container">
								<div class="search-icon" onclick="openSearch('schools')">
									<svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
									</svg>
								</div>
							</div>

							<h2 class="section-title">Choose Your Target Universities</h2>
							<p class="section-subtitle">Select one or more schools (you can pick multiple)</p>
							
							<div id="school-list">
								<label class="checkbox-option" onclick="toggleSchool('UC San Diego (UCSD)', this)">
									<input type="checkbox" onchange="event.stopPropagation()">
									<span>UC San Diego (UCSD)</span>
								</label>
								<label class="checkbox-option" onclick="toggleSchool('San Diego State University (SDSU)', this)">
									<input type="checkbox" onchange="event.stopPropagation()">
									<span>San Diego State University (SDSU)</span>
								</label>
								<label class="checkbox-option" onclick="toggleSchool('CSU Long Beach', this)">
									<input type="checkbox" onchange="event.stopPropagation()">
									<span>CSU Long Beach</span>
								</label>
								<label class="checkbox-option" onclick="toggleSchool('UC Berkeley', this)">
									<input type="checkbox" onchange="event.stopPropagation()">
									<span>UC Berkeley</span>
								</label>
								<label class="checkbox-option" onclick="toggleSchool('UCLA', this)">
									<input type="checkbox" onchange="event.stopPropagation()">
									<span>UCLA</span>
								</label>
							</div>

						<button class="continue-button" id="continue-btn-2" onclick="proceedToMajor()" disabled>Continue â†’</button>
						</div>
					</div>

					<!-- Card 3: Major -->
					<div class="swiper-slide">
						<div class="card card-3">
							<!-- Back Button -->
							<div class="back-button" onclick="goBack()">
								<svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path>
								</svg>
							</div>

							<!-- Search Icon -->
							<div class="search-container">
								<div class="search-icon" onclick="openSearch('major')">
									<svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
									</svg>
								</div>
							</div>

							<h2 class="section-title">Select Your Major</h2>
							<p class="section-subtitle">What do you want to study?</p>
							<div class="button-grid" id="major-list">
								<button class="option-button" onclick="selectMajor('Computer Science', this)">Computer Science</button>
								<button class="option-button" onclick="selectMajor('Business Administration', this)">Business Administration</button>
								<button class="option-button" onclick="selectMajor('Psychology', this)">Psychology</button>
								<button class="option-button" onclick="selectMajor('Engineering', this)">Engineering</button>
								<button class="option-button" onclick="selectMajor('Biology', this)">Biology</button>
							</div>
						</div>
					</div>

					<!-- Card 4: Summary -->
					<div class="swiper-slide">
						<div class="card card-4">
							<!-- Back Button -->
							<div class="back-button" onclick="goBack()">
								<svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path>
								</svg>
							</div>

							<h2 class="section-title">Ready to Begin!</h2>
							<p class="section-subtitle">Let's map out your transfer journey</p>
							<div class="summary-display">
								<div class="summary-item">
									<strong>Community College:</strong> <span id="selected-cc"></span>
								</div>
								<div class="summary-item">
									<strong>Target Universities:</strong> <span id="selected-schools"></span>
								</div>
								<div class="summary-item">
									<strong>Major:</strong> <span id="selected-major"></span>
								</div>
							</div>
							<button class="continue-button" onclick="continueToNext()">Continue to Course Selection â†’</button>
						</div>
					</div>

				</div> <!-- End swiper-wrapper -->
			</div> <!-- End swiper-container -->

			<!-- Search Overlays -->
			<!-- Community College Search -->
			<div class="search-overlay" id="search-overlay-cc" onclick="closeSearchIfOutside(event, 'cc')">
				<div class="search-modal" onclick="event.stopPropagation()">
					<div class="search-header">
						<h3>Search Community Colleges</h3>
						<button class="close-search" onclick="closeSearch('cc')">Ã—</button>
					</div>
					<div class="search-input-container">
						<input type="text" class="search-input" id="search-input-cc" placeholder="Type to search..." oninput="filterItems('cc')">
					</div>
					<div class="search-results" id="search-results-cc"></div>
				</div>
			</div>

			<!-- Schools Search -->
			<div class="search-overlay" id="search-overlay-schools" onclick="closeSearchIfOutside(event, 'schools')">
				<div class="search-modal" onclick="event.stopPropagation()">
					<div class="search-header">
						<h3>Search Universities</h3>
						<button class="close-search" onclick="closeSearch('schools')">Ã—</button>
					</div>
					<div class="search-input-container">
						<input type="text" class="search-input" id="search-input-schools" placeholder="Type to search..." oninput="filterItems('schools')">
					</div>
					<div class="search-results" id="search-results-schools"></div>
				</div>
			</div>

			<!-- Major Search -->
			<div class="search-overlay" id="search-overlay-major" onclick="closeSearchIfOutside(event, 'major')">
				<div class="search-modal" onclick="event.stopPropagation()">
					<div class="search-header">
						<h3>Search Majors</h3>
						<button class="close-search" onclick="closeSearch('major')">Ã—</button>
					</div>
					<div class="search-input-container">
						<input type="text" class="search-input" id="search-input-major" placeholder="Type to search..." oninput="filterItems('major')">
					</div>
					<div class="search-results" id="search-results-major"></div>
				</div>
			</div>

			</div> <!-- End container -->
		</div> <!-- End app-container -->

		<!-- Swiper.js Library -->
		<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

	<script>
			// Data
			const allCCs = [
				'Southwestern College',
				'Cuyamaca College',
				'MiraCosta College',
				'San Diego Miramar College',
				'San Diego Mesa College',
				'Palomar College',
				'Grossmont College',
				'Imperial Valley College'
			];

			const allSchools = [
				'UC San Diego (UCSD)',
				'San Diego State University (SDSU)',
				'CSU Long Beach',
				'UC Berkeley',
				'UCLA',
				'UC Irvine',
				'UC Davis',
				'UC Santa Barbara',
				'CSU San Marcos',
				'CSU Fullerton'
			];

			const allMajors = [
				'Computer Science',
				'Business Administration',
				'Psychology',
				'Engineering',
				'Biology',
				'Nursing',
				'Communications',
				'Political Science',
				'Mathematics',
				'Physics'
			];

			const selections = {
				cc: '',
				schools: [],
				major: ''
			};

			let swiper;
			let currentSlide = 0;

			// Initialize Swiper with cards effect
			document.addEventListener('DOMContentLoaded', function() {
				swiper = new Swiper('#card-swiper', {
					effect: 'cards',
					grabCursor: false,
					allowTouchMove: false,  // Disable swiping, we control navigation
					cardsEffect: {
						perSlideOffset: 8,
						perSlideRotate: 0,
						rotate: false,
						slideShadows: false,
					},
					speed: 600,
					on: {
						slideChange: function() {
							currentSlide = this.activeIndex;
							updateProgress();
						}
					}
				});

				updateProgress();

				// Initialize custom cursor
				initCustomCursor();
			});

			// Custom Cursor Implementation
			function initCustomCursor() {
				const cursorDot = document.querySelector('.cursor-dot');
				const cursorOutline = document.querySelector('.cursor-outline');
				
				let mouseX = 0, mouseY = 0;
				let outlineX = 0, outlineY = 0;

				// Track mouse position
				document.addEventListener('mousemove', (e) => {
					mouseX = e.clientX;
					mouseY = e.clientY;
					
					// Update dot position immediately
					cursorDot.style.left = mouseX + 'px';
					cursorDot.style.top = mouseY + 'px';
				});

				// Smooth follow for outline
				function animateOutline() {
					// Smooth interpolation - higher value = less lag (0.5 = very close follow)
					outlineX += (mouseX - outlineX) * 0.5;
					outlineY += (mouseY - outlineY) * 0.5;
					
					cursorOutline.style.left = outlineX + 'px';
					cursorOutline.style.top = outlineY + 'px';
					
					requestAnimationFrame(animateOutline);
				}
				animateOutline();

			// Hover effect on interactive elements
			const interactiveElements = document.querySelectorAll(
				'button, a, .option-button, .checkbox-option, .search-icon, .back-button, input[type="checkbox"], .chat-toggle-button, .chat-close, .chat-send-btn, .quick-action-btn, textarea'
			);

				interactiveElements.forEach(el => {
					el.addEventListener('mouseenter', () => {
						cursorOutline.classList.add('hover');
					});
					
					el.addEventListener('mouseleave', () => {
						cursorOutline.classList.remove('hover');
					});
				});

				// Click effect
				document.addEventListener('mousedown', () => {
					cursorDot.classList.add('click');
				});

				document.addEventListener('mouseup', () => {
					cursorDot.classList.remove('click');
				});

				// Ripple effect on click
				document.addEventListener('click', (e) => {
					createRipple(e.clientX, e.clientY);
				});
			}

			// Create ripple effect
			function createRipple(x, y) {
				const ripple = document.createElement('div');
				ripple.className = 'ripple';
				ripple.style.left = x + 'px';
				ripple.style.top = y + 'px';
				
				document.body.appendChild(ripple);
				
				// Remove ripple after animation
				setTimeout(() => {
					ripple.remove();
				}, 600);
			}

			// Progress bar update
			function updateProgress() {
				for (let i = 1; i <= 4; i++) {
					const segment = document.getElementById(`segment-${i}`);
					const label = document.getElementById(`label-${i}`);
					
					if (i < currentSlide + 1) {
						segment.classList.add('completed');
						segment.classList.remove('active');
						label.classList.add('completed');
						label.classList.remove('active');
					} else if (i === currentSlide + 1) {
						segment.classList.add('active');
						segment.classList.remove('completed');
						label.classList.add('active');
						label.classList.remove('completed');
					} else {
						segment.classList.remove('active', 'completed');
						label.classList.remove('active', 'completed');
					}
				}
			}

			// Navigation functions
			function goNext() {
				if (swiper && currentSlide < 3) {
					swiper.slideNext();
				}
			}

			function goBack() {
				if (swiper && currentSlide > 0) {
					swiper.slidePrev();
				}
			}

			// Community College Selection
			function selectCC(college, element) {
				document.querySelectorAll('#cc-list .option-button').forEach(btn => {
					btn.classList.remove('selected');
				});
				
				element.classList.add('selected');
				selections.cc = college;
				
				setTimeout(() => {
					goNext();
				}, 400);
			} 

			// School Selection (checkboxes)
			function toggleSchool(school, element) {
				const checkbox = element.querySelector('input[type="checkbox"]');
				checkbox.checked = !checkbox.checked;
				
				if (checkbox.checked) {
					element.classList.add('checked');
					if (!selections.schools.includes(school)) {
						selections.schools.push(school);
					}
				} else {
					element.classList.remove('checked');
					selections.schools = selections.schools.filter(s => s !== school);
				}

			const continueBtn = document.getElementById('continue-btn-2');
			continueBtn.disabled = selections.schools.length === 0;
			}

			function proceedToMajor() {
				if (selections.schools.length > 0) {
					goNext();
				}
			}

			// Major Selection
			function selectMajor(major, element) {
				document.querySelectorAll('#major-list .option-button').forEach(btn => {
					btn.classList.remove('selected');
				});
				
				element.classList.add('selected');
				selections.major = major;
				
				if (selections.cc && selections.schools.length > 0 && selections.major) {
					document.getElementById('selected-cc').textContent = selections.cc;
					document.getElementById('selected-schools').textContent = selections.schools.join(', ');
					document.getElementById('selected-major').textContent = selections.major;
					
					setTimeout(() => {
						goNext();
					}, 400);
				}
			}

			function continueToNext() {
				alert('Continue to course selection! (Next phase of development)');
				console.log('User selections:', selections);
			}

			// Search functionality
			function openSearch(type) {
				const overlay = document.getElementById(`search-overlay-${type}`);
				overlay.classList.add('active');
				
				let data;
				if (type === 'cc') data = allCCs;
				else if (type === 'schools') data = allSchools;
				else if (type === 'major') data = allMajors;
				
				displaySearchResults(type, data);
				
				setTimeout(() => {
					document.getElementById(`search-input-${type}`).focus();
				}, 100);
			}

			function closeSearch(type) {
				const overlay = document.getElementById(`search-overlay-${type}`);
				overlay.classList.remove('active');
				document.getElementById(`search-input-${type}`).value = '';
			}

			function closeSearchIfOutside(event, type) {
				if (event.target.id === `search-overlay-${type}`) {
					closeSearch(type);
				}
			}

			function filterItems(type) {
				const searchTerm = document.getElementById(`search-input-${type}`).value.toLowerCase();
				let data;
				if (type === 'cc') data = allCCs;
				else if (type === 'schools') data = allSchools;
				else if (type === 'major') data = allMajors;
				
				const filtered = data.filter(item => 
					item.toLowerCase().includes(searchTerm)
				);
				displaySearchResults(type, filtered);
			}

			function displaySearchResults(type, items) {
				const resultsContainer = document.getElementById(`search-results-${type}`);
				
				if (items.length === 0) {
					resultsContainer.innerHTML = '<p style="text-align: center; color: #6b6857; padding: 2rem;">No results found</p>';
					return;
				}
				
				if (type === 'schools') {
					// Checkboxes for schools
					resultsContainer.innerHTML = items.map(item => {
						const isChecked = selections.schools.includes(item);
						return `
							<label class="checkbox-option ${isChecked ? 'checked' : ''}" onclick="toggleSchoolFromSearch('${item}', this)">
								<input type="checkbox" ${isChecked ? 'checked' : ''} onchange="event.stopPropagation()">
								<span>${item}</span>
							</label>
						`;
					}).join('');
				} else {
					// Regular buttons for CC and Major
					resultsContainer.innerHTML = items.map(item => {
						const isSelected = type === 'cc' ? selections.cc === item : selections.major === item;
						return `
							<button class="option-button ${isSelected ? 'selected' : ''}" onclick="selectFromSearch('${type}', '${item}')">
								${item}
							</button>
						`;
					}).join('');
				}
			}

			function selectFromSearch(type, item) {
				if (type === 'cc') {
					// Update main list
					document.querySelectorAll('#cc-list .option-button').forEach(btn => {
						btn.classList.remove('selected');
						if (btn.textContent.trim() === item) {
							btn.classList.add('selected');
						}
					});
					selections.cc = item;
					closeSearch('cc');
					setTimeout(() => goNext(), 200);
				} else if (type === 'major') {
					document.querySelectorAll('#major-list .option-button').forEach(btn => {
						btn.classList.remove('selected');
						if (btn.textContent.trim() === item) {
							btn.classList.add('selected');
						}
					});
					selections.major = item;
					closeSearch('major');
					if (selections.cc && selections.schools.length > 0 && selections.major) {
						document.getElementById('selected-cc').textContent = selections.cc;
						document.getElementById('selected-schools').textContent = selections.schools.join(', ');
						document.getElementById('selected-major').textContent = selections.major;
						setTimeout(() => goNext(), 400);
					}
				}
			}

			function toggleSchoolFromSearch(school, element) {
				const checkbox = element.querySelector('input[type="checkbox"]');
				checkbox.checked = !checkbox.checked;
				
				if (checkbox.checked) {
					element.classList.add('checked');
					if (!selections.schools.includes(school)) {
						selections.schools.push(school);
					}
				} else {
					element.classList.remove('checked');
					selections.schools = selections.schools.filter(s => s !== school);
				}

				updateMainListCheckboxes();
				
			const continueBtn = document.getElementById('continue-btn-2');
			continueBtn.disabled = selections.schools.length === 0;
			}

			function updateMainListCheckboxes() {
				const mainList = document.getElementById('school-list');
				const checkboxOptions = mainList.querySelectorAll('.checkbox-option');
				
				checkboxOptions.forEach(option => {
					const schoolName = option.querySelector('span').textContent;
					const checkbox = option.querySelector('input[type="checkbox"]');
					
					if (selections.schools.includes(schoolName)) {
						checkbox.checked = true;
						option.classList.add('checked');
					} else {
						checkbox.checked = false;
						option.classList.remove('checked');
					}
		});
	}

	// ========== CHAT FUNCTIONALITY ==========
	
	const chatState = {
		isOpen: false,
		messages: []
	};

	function initChatSidebar() {
		const chatToggle = document.getElementById('chat-toggle');
		const chatSidebar = document.getElementById('chat-sidebar');
		const chatClose = document.getElementById('chat-close');
		const chatInput = document.getElementById('chat-input');
		const chatSendBtn = document.getElementById('chat-send-btn');
		const chatMessages = document.getElementById('chat-messages');
		const appContainer = document.querySelector('.app-container');
		const quickActionButtons = document.querySelectorAll('.quick-action-btn');

		// Add welcome message
		addMessage('assistant', "Welcome to BetterTransfer! I'm here to help you navigate your path from community college to university. Ask me about course requirements, transfer deadlines, GPA requirements, or school selection. Let's make your transfer journey smooth! ðŸŽ“");

		// Toggle chat
		chatToggle.addEventListener('click', () => {
			toggleChat();
		});

		chatClose.addEventListener('click', () => {
			toggleChat();
		});

		// Send message
		chatSendBtn.addEventListener('click', () => {
			sendMessage();
		});

		chatInput.addEventListener('keypress', (e) => {
			if (e.key === 'Enter' && !e.shiftKey) {
				e.preventDefault();
				sendMessage();
			}
		});

		// Quick action buttons
		quickActionButtons.forEach(btn => {
			btn.addEventListener('click', () => {
				chatInput.value = btn.textContent.trim();
				sendMessage();
			});
		});
	}

	function toggleChat() {
		const chatToggle = document.getElementById('chat-toggle');
		const chatSidebar = document.getElementById('chat-sidebar');
		const appContainer = document.querySelector('.app-container');
		
		chatState.isOpen = !chatState.isOpen;
		
		if (chatState.isOpen) {
			chatSidebar.classList.add('open');
			appContainer.classList.add('chat-open');
			chatToggle.style.display = 'none';
		} else {
			chatSidebar.classList.remove('open');
			appContainer.classList.remove('chat-open');
			chatToggle.style.display = 'flex';
		}
	}

	async function sendMessage() {
		const chatInput = document.getElementById('chat-input');
		const message = chatInput.value.trim();
		
		if (message === '') return;
		
		addMessage('user', message);
		chatInput.value = '';
		
		try {
			// Build message array for API
			const messages = chatState.messages.map(msg => ({
				role: msg.type,
				content: msg.text
			}));
			messages.push({ role: 'user', content: message });
			
			// Call backend API with streaming
			const response = await fetch('/api/chat', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify({ messages })
			});
			
			if (!response.ok) throw new Error('API request failed');
			
			// Handle streaming response
			const reader = response.body.getReader();
			const decoder = new TextDecoder();
			let assistantMessage = '';
			let messageElement = null;
			
			while (true) {
				const { done, value } = await reader.read();
				if (done) break;
				
				const chunk = decoder.decode(value, { stream: true });
				const lines = chunk.split('\n').filter(line => line.trim());
				
				for (const line of lines) {
					try {
						const json = JSON.parse(line);
						if (json.response) {
							assistantMessage += json.response;
							
							if (!messageElement) {
								messageElement = document.createElement('div');
								messageElement.className = 'chat-message assistant';
								document.getElementById('chat-messages').appendChild(messageElement);
							}
							if (window.marked) {
								messageElement.innerHTML = marked.parse(assistantMessage);
							} else {
								messageElement.textContent = assistantMessage;
							}
							document.getElementById('chat-messages').scrollTop = document.getElementById('chat-messages').scrollHeight;
						}
					} catch (e) {
						// Skip non-JSON lines
					}
				}
			}
			
			// Store message in state
			if (assistantMessage) {
				chatState.messages.push({ type: 'assistant', text: assistantMessage });
			}
		} catch (error) {
			console.error('Chat error:', error);
			addMessage('assistant', 'Sorry, there was an error. Please try again.');
		}
	}

	function addMessage(type, text) {
		const chatMessages = document.getElementById('chat-messages');
		const messageDiv = document.createElement('div');
		messageDiv.className = `chat-message ${type}`;
		
		// Parse markdown for assistant messages
		if (type === 'assistant' && window.marked) {
			messageDiv.innerHTML = marked.parse(text);
		} else {
			messageDiv.textContent = text;
		}
		
		chatMessages.appendChild(messageDiv);
		chatMessages.scrollTop = chatMessages.scrollHeight;
		
		chatState.messages.push({ type, text });
	}

	// Show chat toggle when app starts (synchronized slideshow transition)
	function startPlanning() {
		const landingPage = document.getElementById('landing-page');
		const appContainer = document.querySelector('.app-container');
		const chatToggle = document.getElementById('chat-toggle');
		
		// Show app container immediately (behind landing page)
		appContainer.style.display = 'flex';
		
		// Small delay to ensure display change is registered
		setTimeout(() => {
			// Trigger both animations simultaneously - landing page out, cards in
			landingPage.style.transform = 'translateX(-100%)';
			landingPage.style.opacity = '0';
			appContainer.style.transform = 'translateX(0)';
			appContainer.style.opacity = '1';
			
			// Clean up landing page after transition completes
			setTimeout(() => {
				landingPage.style.display = 'none';
			}, 300);
			
			// Show chat toggle button after animation
			setTimeout(() => {
				chatToggle.classList.add('visible');
			}, 250);
		}, 20);
	}

	// Initialize chat when page loads
	window.addEventListener('DOMContentLoaded', () => {
		initChatSidebar();
	});
</script>
</body>
</html>
